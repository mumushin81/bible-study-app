## 🖼️ 플래시카드 이미지 생성 가이드라인

### 1. 이미지 생성 프로세스

#### 목적
- 히브리어 단어의 심층적 의미를 시각적으로 표현
- 플래시카드 앞면에 고품질, 상징적 이미지 생성

#### 기술 스택
- FLUX 1.1 Pro AI (이미지 생성)
- Sharp (이미지 최적화)
- Supabase Storage (이미지 저장)

#### 이미지 생성 규칙
1. 고정 비율: 9:16 (플래시카드 모바일 비율)
2. 소프트 파스텔 색상 사용
3. 추상적이고 상징적인 이미지
4. 밝고 희망적인 분위기
5. 어두운 색상 배제
6. 고품질, 전문적인 일러스트레이션

#### 업로드 및 저장 프로세스
- MD5 해시를 사용한 파일명 생성
- Supabase Storage의 `hebrew-icons/icons/` 버킷에 저장
- 이미지 크기 최적화 (600x1067px, 80% 품질)
- 데이터베이스 `words` 테이블의 `icon_url` 필드 업데이트

### 2. 주의사항 및 금지 사항

#### 🚫 절대 금지
1. 이미지 없는 단어 방치 금지
2. 중복된 이미지 업로드 금지
3. 비윤리적/공격적 이미지 생성 금지
4. 저작권 침해 이미지 사용 금지
5. 개인정보가 포함된 이미지 생성 금지

#### ✅ 반드시 지켜야 할 사항
1. 모든 단어에 대해 이미지 생성
2. 이미지 생성 실패 시 상세 로깅
3. 기존 이미지 업데이트 시 `upsert` 옵션 사용
4. 이미지 크기 최적화
5. 데이터베이스와 스토리지 동기화

### 3. 문제 해결 가이드

#### 이미지 생성 실패 시 대응
1. API 호출 실패 로그 확인
2. 프롬프트 재작성
3. 이미지 크기/포맷 조정
4. 재시도 메커니즘 구현

#### 성능 및 보안 고려사항
- API 토큰 안전하게 관리
- 이미지 생성 시 Rate Limit 고려
- 생성된 이미지의 콘텐츠 검증
- 스토리지 용량 모니터링

### 4. 스크립트 실행 방법
```bash
# 특정 장/구절의 단어 이미지 생성
npx tsx scripts/images/generateGenesisImages.ts

# 모든 단어 이미지 일괄 생성 (준비 중)
npx tsx scripts/images/generateAllWordImages.ts
```

### 5. 향후 개선 방향
- AI 프롬프트 자동 최적화
- 이미지 다양성 확보 알고리즘
- 병렬 처리를 통한 성능 향상
- 이미지 생성 자동화 파이프라인 구축

### 6. 문제 추적 및 로깅
- 모든 이미지 생성 시도 상세 로깅
- 실패 원인 분석 및 추적
- 주기적인 이미지 품질 검수
- 이미지 생성 통계 수집

### 7. 윤리 및 법적 가이드라인
- AI 생성 이미지에 대한 명시적 고지
- 저작권 및 지적재산권 존중
- 개인정보 및 윤리적 가이드라인 준수